# 案例复盘：麦当劳中国 SCND（供应链网络设计）如何把 5,250 万变量压到 10 分钟内可迭代？

> 这篇复盘的核心不是“OR 很强”，而是：**大规模 MIP 怎么做成决策产品**。  
> 主要参考：Tang et al. (2025) *McDonald’s China Adopts Operations Research for Network Design*（INFORMS Journal on Applied Analytics，Free access）  
> [`https://pubsonline.informs.org/doi/10.1287/inte.2024.0179`](https://pubsonline.informs.org/doi/10.1287/inte.2024.0179)

---

## 背景与需求

- 麦当劳中国门店扩张目标：到 2028 年达 10,000 家规模（论文中给出）。
- 供应链需要在多区域、长周期下做“DC 路线图”（开/关/留），并同时满足成本与减排目标。

这类问题属于典型的 **Supply Chain Network Design (SCND)**：战略级优化，一次决策会影响数年成本结构与运营性能。

---

## 核心约束（把“数学正确”变成“现实可用”）

论文强调了大量业务约束，典型包括：

- 工厂产能约束
- DC 容量约束（并按 frozen/chilled/dry 分区）
- DC 开关逻辑（开了再关不能再开；既有 DC 不能“关了又开”）
- 库存成本（cycle stock + safety stock，安全库存用 square root law）

---

## 模型结构（概念层）

三层网络数字孪生：

- inbound：工厂 → DC
- outbound：DC → 需求点（城市）

目标：最小化全链路成本（运输、处理、库存、固定资产等），并在场景分析中对齐可持续 KPI。

---

## 关键挑战：规模（不是“写不写得出模型”）

论文指出：出库流变量是最大块，涉及 DC×城市×SKU×年，单这一块就到 **52.5 million** 级别。原始模型“超过 10 小时仍无法求到最优”。

如果求解速度不能进入“分钟级”，就无法支撑数百次场景对比，也无法在组织内形成共识。

---

## 规模缩减 Playbook（可复用）

> 目标：把模型从“求不动”变成“可迭代”。

### 1) 聚合（Aggregation）

- **需求聚合**：门店级 → 城市级（约 10,000 → 350）
- **SKU 聚合**：2,000+ SKU → 约 150 组（把可互换 SKU 归并）

原则：聚合不是为了省事，而是把决策粒度对齐到“战略规划可用”的层级。

### 2) 剪枝（Pruning）

- **剔除不合理流向**：基于地理常识与业务规则，删除跨区极不合理的运输边
- 论文披露约减少 **60% 变量**

原则：能用 domain rule 砍掉的变量，优先砍；不要把 solver 当超能力。

### 3) 去维（Dimensionality reduction）

论文的关键一刀是：观察到“城市通常由单一 DC 服务全部 SKU”，因此 **移除出库流的 SKU 维度**：

- 从 \(of_{i,d,s,t}\) 改为 \(of_{i,d,t}\)
- SKU 通过比例参数 \(\pi_{d,t,s}\) 回填约束

这是典型的“用结构性事实换规模”。

### 4) 分解（Decomposition as filtering）

- 先跑单年模型筛选候选 DC 池
- 再跑 5 年全局优化

虽然多跑模型，但整体更快、更稳。

---

## 落地关键：GUI（让最优解可被组织接受）

论文强调“可解释结果”是硬需求，并用 GUI 实现：

- 地图/热力图展示覆盖关系
- 分年成本拆解（表格/饼图）
- 多场景并排对比（支持人类约束回注下一轮）

经验结论：

> **优化系统的最后一公里不是求解器，而是可视化与交互。**

---

## 结果（论文披露）

- 取消青岛面包工厂建设，避免约 **USD 63.75 million** 投资
- 平均每年节省约 **USD 8.9 million**
- **10.6% CO2** 减排
- 求解速度从小时级降到 **<10 分钟**，从而支持数百次场景分析

---

## 可迁移的结论（给做 SCND / 大规模 MIP 的团队）

- **不要盲目追求粒度**：战略网络设计不需要“门店级精确”，需要“组织可接受的决策精确”。
- **聚合/剪枝/去维优先级高于 solver 调参**：这是把问题从不可解变可解的第一性手段。
- **把分钟级求解当成产品需求**：否则做不了 scenario library，也无法形成组织共识。
- **GUI 是谈判工具**：让模型输出成为“可被质询、可被说服”的证据，而不是黑盒答案。

