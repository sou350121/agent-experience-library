# 实测案例：WebSocket 转 SSE 重构任务

> **来源**：weishu (@twsxtd) 的实战复盘

## 结论摘要
- **胜者**：**GPT-5.2 Codex**
- **核心差异**：GPT-5.2 在复杂工程逻辑的“正确性”和“长上下文理解”上断层式领先。Claude Opus 4.5 虽然速度极快，但容易产生隐性 Bug，导致后期 Debug 成本飙升。
- **适用建议**：复杂、多文件联动、高可靠性要求的重构任务首选 GPT-5.2；原型开发或简单逻辑选 Claude。

## 实验数据 (weishu 案例)
- **任务内容**：将 Happy 项目的 WebSocket 实现重构为 SSE。
- **Claude Opus 4.5**：
    - 耗时：约 15 分钟。
    - 质量：肉眼无误，但经过多轮 Review 暴露出至少 7 个深层 Bug。
- **GPT-5.2 Codex**：
    - 耗时：约 40 分钟。
    - 质量：逻辑稳健，能区分“Bug”与“设计取舍”。

## 深度评估维度
| 维度 | GPT-5.2 Codex | Claude Opus 4.5 | 备注 |
| :--- | :--- | :--- | :--- |
| **重构稳定性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | Claude 的多轮修复仍有反复 |
| **长上下文逻辑一致性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | GPT 表现出断层优势 |
| **自我辩解/设计能力** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | GPT 能基于设计取舍反驳 Review 意见 |
| **交付速度** | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | Claude 极快，但包含“Debug 负债” |

## 工程启示
### 1. “写完”不等于“做好”
Claude 极短的完成时间（15 min）具有诱惑力，但在工程实践中，由于其引入的 Bug 需要多轮 Review 和修复，导致总交付成本（TCO）反而更高。

### 2. 交叉 Review 的威力
使用 A 模型编写，B 模型 Review 的范式依然有效。特别是在 GPT-5.2 作为 Reviewer 时，它对代码缺陷的敏感度极高。

### 3. 尊重模型的设计决策
当 GPT-5.2 认为某个问题是“设计取舍”而非“Bug”时，往往意味着它对项目整体架构有更深的理解，这提示开发者在面对顶尖模型时，需要更仔细地审视其反驳逻辑。























