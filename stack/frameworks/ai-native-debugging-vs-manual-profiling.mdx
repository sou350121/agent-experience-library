# AI 原生调试：从手动 Profiling 到 Agentic 诊断

Boris Cherny 提到的“内存泄漏调试案例”是软件工程史上的一次分水岭。它标志着我们从“手动操作工具”转向了“编排 AI 操作工具”。

## 1. 传统派的“慢路径” (Manual Path)
1.  **挂载工具**：连接 Profiler。
2.  **采样观测**：手动运行应用，捕捉 Heap 分配。
3.  **人工过滤**：在数以万计的对象中寻找异常。
4.  **定位修复**：根据经验推测泄漏点。
- **缺点**：极度依赖工程师的体力与经验，且在大规模系统中非常耗时。

## 2. AI 原生派的“快路径” (AI-Native Path)
1.  **自动化取证**：指令 AI 生成 Heap Dump 或日志快照。
2.  **结构化解析**：让 AI 直接读取 Dump 原始数据。AI 对结构化数据的处理速度远超人类肉眼。
3.  **模式识别**：利用 AI 的长上下文能力，对比正常与异常状态下的内存模式。
4.  **闭环修复**：AI 定位问题后，直接发起修改代码的 PR。

## 3. 为什么 AI 赢了？
AI 不只是能写代码，它能**“读懂”**系统的运行状态。
- **去掉路径依赖**：AI 不会受“以前这里出过错”的先入为主判断影响。
- **常识驱动**：如 Boris 所言，AI 拥有极强的工程常识，能快速识别不该被保留的对象。

## 4. 给开发者的建议
- **不要急着打开 Profiler**：先问问 Agent，“我遇到了 X 问题，你能帮我生成并分析一下 Dump 吗？”
- **构建诊断 Skill**：将这类调试流程固化为你的 [Claude Skill](../tools/claude-skills-guide.mdx)。
- **赋予权限**：通过 [MCP](../capabilities/skill-vs-mcp-architecture.mdx) 让 Agent 拥有读取日志、执行调试命令的真实权力。

---

**关联阅读：**
- [架构治理专项](../architecture-governance/README.mdx)
- [Agent 宪法 V3：Boris 范式强化](../../AGENT_CONSTITUTION_UNIVERSAL.md)
