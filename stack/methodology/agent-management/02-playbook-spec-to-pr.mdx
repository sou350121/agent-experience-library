# 02 Playbook：从 Spec 到 PR（Spec → PR Delivery）

> 目标：把“写代码”变成“交付系统”。这是一条可以复制的生产线：**信号 → Spec → 实现 → 验证 → PR → 复盘**。

---

## 🧠 核心洞见

> **“没有可验证的 Spec，就没有可管理的交付。”**

Agent 最大的风险不是“写不出来”，而是“写出来但你无法确定对不对”。Spec → PR 的本质是：把确定性前置，把随机性关进流程里。

---

## 0. 适用范围

- ✅ 文档改造、功能开发、重构、修 bug
- ✅ 需要跨多个文件的更改
- ✅ 需要 commit/push 的工作

---

## 1. Signal Intake（把信息变成任务）

### 输入（Signal）
- 一段 tweet/对话/想法/需求

### 输出（Task Statement）
- 一句话目标 + 范围边界 + 风险等级

模板：

```text
目标：
范围：
风险等级：低/中/高
不做：
```

---

## 2. Requirements（EARS + 验收标准）

> 这里与 Kiro 的 Spec-Driven 范式对齐：**先验证后执行**。

### 2.1 EARS（最小够用）

```text
Ubiquitous:
- The system SHALL ...

Event-driven:
- WHEN ... THEN the system SHALL ...

State-driven:
- WHILE ... the system SHALL ...

Unwanted behavior:
- IF ... THEN the system SHALL ... (mitigation)
```

### 2.2 Acceptance Criteria（必须可验证）

示例：
- [ ] 新增文档 `docs/agent-management/...` 并在 `docs/README.md` 可导航
- [ ] `blog/README.md` 不包含死链接
- [ ] 所有更改已 commit 并 push 到 main

---

## 3. Design（设计最小闭环）

设计输出必须回答 5 个问题：
1. **在哪里改**（文件路径）
2. **改什么**（新增/更新/删除）
3. **怎么验证**（读者可复现）
4. **如何回滚**（失败时撤回）
5. **风险点**（权限、执行、依赖、破坏性变更）

---

## 4. Implementation（实现与自测）

执行策略（强烈推荐）：
- **小步提交**：每个 commit 只做一件事（docs/索引/constitution 分开）
- **先增后改**：先添加新文档，再更新 README 索引
- **交叉链接**：每篇文档都至少链接回模块 README

自测清单：
- [ ] 新增文件路径正确
- [ ] 链接相对路径正确
- [ ] README 的目录表可点击并落到正确文件

---

## 5. Review Gate（审查关）

