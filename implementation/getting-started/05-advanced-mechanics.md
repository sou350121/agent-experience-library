# 05 进阶：理解 Agent 的“大脑”与“感官”

当你已经能用 Cursor 写出小工具后，理解 Agent 的底层运作逻辑，能让你从“使用者”进化为“指挥官”。

## 1. 核心模型：Agent 中的 3 个“角色”

为了理解 Agent 的运作，我们可以将其拆解为三个最核心的组成部分：

*   **用户 (User)**：提出需求的人（就是你）。
*   **模型 (LLM)**：大脑。一个“输入文本 -> 输出文本”的智能机器。它虽然聪明，但它只能“说话”，不能直接触碰你的文件或运行你的命令。
*   **服务端 (Server)**：桥梁。它是 Agent 真正拥有“手脚”的原因。它负责接收你的信息，打包发给模型，然后把模型想做的动作（比如读文件）转化为真实的电脑操作。

## 2. 运作机制：ReAct 循环 (思考 -> 行动 -> 观察)

AI Agent 不是一次性写完代码的。它在后台跑着一个循环，就像人类解决问题的过程：

```text
    +---------------------------------------+
    |           [ 1. Reasoning (思考) ]      | <--- "我需要先读一下这个文件"
    +------------------+--------------------+
                       |
                       v
    +---------------------------------------+
    |           [ 2. Acting (行动) ]        | <--- 服务端调用工具 (如 read_file)
    +------------------+--------------------+
                       |
                       v
    +---------------------------------------+
    |           [ 3. Observing (观察) ]      | <--- "文件内容我看完了，没发现问题"
    +------------------+--------------------+
                       |
                       +---- 循环，直到任务完成 ----+
```

### 为什么 Agent 比普通聊天（如网页版 ChatGPT）更厉害？
在普通聊天中，如果你问模型一个它不知道的问题（比如：9.11 和 9.8 谁大），模型可能会因为“幻觉”给出一个错误解释。

而在 Agent 模式下：
1. 模型发现自己不确定。
2. 它会主动要求**“使用工具”**（比如读取你项目里的数值比较规范文件）。
3. 服务端帮它读取文件，并把结果喂回给模型。
4. 模型基于**真实的证据**，给出正确的回答。

**结论**：Agent 的精妙之处在于它**接纳了模型的不完美**，并通过不断地提供“外部信息”来弥补大脑的不足。

## 3. 为什么 @ 符号如此重要？ (上下文精准投喂)

在提示词里用 `@file` 或 `@folder`，本质上是在**手动干预 AI 的“感官”**。

*   **减少幻觉**：直接把正确的文件塞到 AI 手里，它就不需要凭空猜测你的函数名是怎么写的。
*   **节省精力**：这能防止 AI 在庞大的项目里漫无目的地搜索，让它把“注意力”集中在最关键的代码段。

## 3. 子智能体 (SubAgent)：精英小分队

在处理复杂任务时，主 AI 会派出“子智能体”。

```text
    [ 主 Agent ] (总指挥)
         |
         +---- [ 子 Agent A ] (专门搜代码)
         |
         +---- [ 子 Agent B ] (专门跑测试)
```

*   **分工明确**：子 Agent 在独立的空间干活，干完只把关键结果汇报给总指挥。
*   **保持清醒**：这样主对话框里就不会塞满搜索废话，保证了主大脑能专注处理你的最终需求。

## 4. MCP：AI 的“万能触角”

MCP (Model Context Protocol) 是让 AI 连接真实世界的插座。

*   **能力扩展**：通过它，AI 就不再只是个“聊天框”，而是能连接你的数据库、搜索最新的互联网文档、甚至读取你电脑上的实时日志。

---
> 恭喜你！你已经跨过了小白阶段，掌握了指挥 AI 的全套基本功。
> 接下来，去 [提示词库](../prompts/README.md) 挑选一个你的“神笔”开始创作吧！
