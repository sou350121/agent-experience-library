# 03-流程层治理：审查与协同闭环

架构治理不只是文档，更是一套持续运行的流程。

## 1. Plan Mode：架构的首道哨卡

在 AI 编码工具（如 Claude Code, Cursor）中，**Plan Mode** 是治理的最佳时机。

- **禁止直接施工**：
  > "请先进入 Plan Mode，说明你打算如何修改代码结构，以及如何保持既有的分层规范。等我确认后你再动手。"
- **审查重点**：
  - 它是否在正确的文件夹建了文件？
  - 它是否复用了既有的工具类？
  - 它是否引入了多余的依赖？

## 2. 证据链回溯 (Evidence Tracking)

每一行被 AI 修改的代码，都应该能回溯到其架构意图。
- **Commit 规范**：强制 AI 在提交信息中关联 Story ID。
- **Session 归档**：在 `sessions/` 目录下保留关键架构决策的对话记录。

## 3. Re-Vibe：架构的持续演进

当项目积累了大量“AI 技术债”时，不要试图缝补。
- **局部重写策略**：如果一个组件的架构逻辑已经过时，直接删除并让 AI 根据最新的 [物理导轨](./01-physical-rails.mdx) 重新生成整个目录。
- **自动化测试作为底气**：治理的前提是有高覆盖率的测试。AI 生成的代码必须通过 CI 中的测试，否则架构治理就成了空谈。

---

**返回主页：** [架构治理专项主页](./README.mdx)
