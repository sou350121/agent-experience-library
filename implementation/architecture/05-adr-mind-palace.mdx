# 05-架构决策记录 (ADR)：给 AI 建一座记忆宫殿

AI 的上下文窗口是有限的，它可能会在三个月后忘记你为什么要用“响应式编程”而不是“回调函数”。**ADR (Architecture Decision Records)** 是对抗这种遗忘的最佳手段。

## 1. 什么是 ADR？

ADR 是一份简短的、包含时间戳的文档。它记录了：
- **Context (背景)**：我们遇到了什么问题？
- **Decision (决策)**：我们选了哪个方案？
- **Consequences (后果)**：这个方案有什么代价？（技术债或约束）

## 2. 为什么 ADR 对 Agent 至关重要？

在 Vibe Coding 语境下，ADR 是 Agent 的**“长期记忆 (Long-term Memory)”**。
- **防止反复横跳**：如果你已经决定用 `Zustand` 管状态，就在 `docs/adr/` 里记一笔。当新的 Agent 试图引入 `Redux` 时，系统会提醒它读取 ADR，从而保持架构的连续性。
- **提供决策上下文**：AI 只有知道了“为什么这么做”，才能在生成代码时保持一致的风格。

## 3. 推荐目录结构

```bash
docs/adr/
├── 0001-record-architecture-decisions.md
├── 0002-use-clean-architecture-layers.md
└── 0003-adopt-result-type-for-errors.md
```

## 4. 实战指令 (入职仪式)
在 `AGENT.md` 中加入：
> "在开始任何涉及架构的变更前，必须首先读取 `docs/adr/` 下的所有文档，确保你的方案不违背已有的架构决策。"

---

**返回主页：** [架构治理专项主页](./README.mdx)
